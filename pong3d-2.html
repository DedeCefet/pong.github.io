<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>PONG</title>
  <meta name="description" content="PONG">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-animation-component@^4.1.2/dist/aframe-animation-component.min.js"></script>
  <script
    src="https://cdn.rawgit.com/donmccurdy/aframe-physics-system/v3.1.2/dist/aframe-physics-system.min.js"></script>
  <script src="https://unpkg.com/aframe-physics-extras@0.1.2/dist/aframe-physics-extras.min.js"></script>

<body>
  <script type="text/javascript">
    AFRAME.registerComponent('mover-players', {
      schema: { speed: { default: 1 } },
      init: function () {
        this.ifMouseDown = false;
        this.x_cord = 0;
        this.y_cord = 0;



        const el = this.el;
        const player = document.getElementById('player');
        const playerPos = el.getAttribute('position');
        console.log("y " + playerPos.y);
        if (playerPos.y > 54) {
          playerPos.y = "0";
        }



        document.addEventListener('mousedown', this.OnDocumentMouseDown.bind(this));
        document.addEventListener('mouseup', this.OnDocumentMouseUp.bind(this));
        document.addEventListener('mousemove', this.OnDocumentMouseMove.bind(this));
      },
      OnDocumentMouseDown: function (event) {
        this.ifMouseDown = true;
        this.x_cord = event.clientX;
        this.y_cord = event.clientY;

      },
      OnDocumentMouseUp: function () {
        this.ifMouseDown = false;
      },
      OnDocumentMouseMove: function (event) {
        if (this.ifMouseDown) {
          var temp_x = event.clientX - this.x_cord;
          var temp_y = event.clientY - this.y_cord;
          this.el.object3D.translateZ(temp_y * this.data.speed / 50);
          this.el.object3D.translateX(temp_x * this.data.speed / 100);
          this.y_cord = event.clientY;
          this.x_cord = event.clientX;

        }
      }

    });
  </script>



  <a-scene physics="debug: false;gravity: 0;friction: 0; restitution: 1.0;" antialias="true">
    <!-- <a-box id="linha" width="0.1" height="38 " depth="0.1" position="0  5 -27" rotation="-90 0 0" color="#FFFFFF">
    </a-box>-->
    <a-plane src="mesa.jpg" position="0 4 -30" rotation="0 0 0" width="240 " height="120  " material="color: black">
    </a-plane>

    <a-box static body physics-collider="ignoreSleep: true" id="ladoe" scale="0.1  8 243" position="0.4 65 -28"
      rotation="0 90 90" color="black">
    </a-box>
    <a-box static body physics-collider="ignoreSleep: true" id="ladod" scale="0.1  8 243" position="0.4 -57 -28"
      rotation="0 90 90" color="black">
    </a-box>


    <a-box static body physics-collider="ignoreSleep: true" id="trase" scale="0.1  8 125" position="-120 4 -30"
      rotation="90 0 0" color="black">
    </a-box>
    <a-box static body physics-collider="ignoreSleep: true" id="trasd" scale="0.1  8 125" position="120  4 -30"
      rotation="90 0 0" color="black">
    </a-box>


    <a-box static-body physics-collider="ignoreSleep: true" id="player" scale="4.9  8 18.6" position="-112.4  0 -25"
      rotation="-90 0 0" color="#4CC3D9" mover-players>
    </a-box>
    <a-box static-body physics-collider="ignoreSleep: true" id="player" scale="4.9  8 18.6" position="112.4 80 -25"
      rotation="-90 0 0" color="#FF0000" mover-players>
    </a-box>
    <!-- look-controls wasd-controls mexer paletas com  wasd-->
    <!--  mover-players mecher com mouse no eixo x-->
    </a-box>
    <a-sphere static body dir="1000" id="ball" position="110.5 15 -26" radius="2.25" color="#DCDCDC"></a-sphere>
    </a-sphere>

    <a-entity position="-0 -10 80">
      <a-camera user-height="-20.0" look-controls="enabled:false">
      </a-camera>
    </a-entity>

    <a-assets>
      <!--
      <a-asset-item id="crate-obj" src="models/aztec-temple.obj"></a-asset-item>
      <a-asset-item id="crate-mtl" src="models/aztec-temple.mtl"></a-asset-item>
      -->
    </a-assets>
    <!--<a-obj-model src="#crate-obj" mtl="#crate-mtl  "></a-obj-model> -->
    <a-sky id="sky" color="#00ced1"></a-sky>

  </a-scene>


</body>

</html>